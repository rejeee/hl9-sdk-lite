# hl9-sdk

## 目录结构

app: 公用应用程序文件

bsp：主板驱动支持文件

kernel：内核相关文件

libs：通用库文件

net：网络MAC协议相关

projects: 工程相关文件

## 开发环境
最新版本SDK支持Keil和IAR两种编译环境。IAR采用7.7版本，Keil采用5.25，其它版本环境未有时间验证，有更高版本软件请自行移植适配。

相关软件请自行在官网下载和安装：
IAR：https://www.iar.com/iar-embedded-workbench
Keil: http://www.keil.com/

仿真器可采用J-Link仿真或IAR支持的相关仿真器，采用SWD接口。

在编译之前请先安装MCU支持包，可从www.hdsc.com.cn官网自行下载，或咨询公司销售和技术支持。

## 调式说明
本评估板使用MCU仿真的话，需要注意两点。
1. MCU深度休眠时无法使用SWD调式，需要复位芯片以恢复SWD调式口功能进行程序仿真。
2. MCU启动支持BOOT选择开关，对应的端口是PD03，PD03低电平则为运行模式（可仿真调试），高电平为ISP烧录模式。

因此，建议在开发休眠功能之前，确保系统重启后能够仿真烧录（如果是运行即休眠业务逻辑，建议在调式阶段，启动后增加几秒的延时用于调试开发使用）

## 工程说明
例程经过很好的代码封装，模块化耦合度低，main文件为主程序入口。

上述代码中：
采用RTX系统多任务处理，除主任务外，分别AT Task（app_at.c）和Mac Task(app_mac.c)分别处理AT指令和无线收发。
platform为HL9相关外设操作。

## 二次开发参考
SDK包中集成了
1. AT指令集
2. LoRa无线收发操作
3. 低功耗串口自动唤醒
4. RTX系统接口，方便开发多任务操作

用户可以根据需要增删功能。

具体AT操作，请参考 Rejeee AT指令手册，开发文档手册在目录docs中。

## 修改记录

### 2020-07-18
1. 将不存在的GPIO配置为输入下拉，因为新批次MCU内部存在不确定的功耗。

### 2020-06-01
1. 重命名工程目录为HL9，将RTX从CMSIS中移动到Kernel根目录，以保持与其他RTOS同等级。
2. 增加Flash读失败的校验次数。
3. 合并127x芯片的优化说明，提升拒止带外信号能力。
4. 优化模组ID和ADDR生成机制。

